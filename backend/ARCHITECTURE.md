# ğŸ—ï¸ TalentsPal Backend Architecture

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND                                 â”‚
â”‚                    (Login/Signup Pages)                          â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Login Page   â”‚  â”‚ Signup Page  â”‚  â”‚ Profile Page â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                  â”‚                  â”‚                   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                            â”‚                                      â”‚
â”‚                   AuthService.ts                                 â”‚
â”‚                            â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    HTTP/HTTPS (JSON)
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND SERVER                               â”‚
â”‚                   (Express + TypeScript)                          â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    MIDDLEWARE LAYER                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚ Helmet  â”‚  â”‚  CORS   â”‚  â”‚  Morgan â”‚  â”‚  JSON   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚Security â”‚  â”‚         â”‚  â”‚ Logger  â”‚  â”‚ Parser  â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    ROUTES LAYER                         â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  /health          â†’ Health Check                        â”‚    â”‚
â”‚  â”‚  /api/auth/signup â†’ Signup Controller                   â”‚    â”‚
â”‚  â”‚  /api/auth/login  â†’ Login Controller                    â”‚    â”‚
â”‚  â”‚  /api/auth/me     â†’ Get Profile (Protected)             â”‚    â”‚
â”‚  â”‚  /api/auth/update â†’ Update Profile (Protected)          â”‚    â”‚
â”‚  â”‚  /api/auth/change â†’ Change Password (Protected)         â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                 AUTHENTICATION MIDDLEWARE                â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚    â”‚
â”‚  â”‚  â”‚ 1. Extract JWT from Authorization header     â”‚      â”‚    â”‚
â”‚  â”‚  â”‚ 2. Verify token signature                    â”‚      â”‚    â”‚
â”‚  â”‚  â”‚ 3. Check token expiration                    â”‚      â”‚    â”‚
â”‚  â”‚  â”‚ 4. Validate user exists and is active        â”‚      â”‚    â”‚
â”‚  â”‚  â”‚ 5. Attach user data to request               â”‚      â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                  CONTROLLERS LAYER                      â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚    â”‚
â”‚  â”‚  â”‚ authController.ts                          â”‚        â”‚    â”‚
â”‚  â”‚  â”‚                                             â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ signup()         - Register user        â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ login()          - Authenticate user    â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ getMe()          - Get user profile     â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ updateProfile()  - Update user data     â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ changePassword() - Change password      â”‚        â”‚    â”‚
â”‚  â”‚  â”‚                                             â”‚        â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   UTILITIES LAYER                       â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚ validation.tsâ”‚  â”‚    jwt.ts    â”‚  â”‚errorHandler â”‚  â”‚    â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚    .ts      â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Email      â”‚  â”‚ â€¢ Generate   â”‚  â”‚ â€¢ AppError  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Password   â”‚  â”‚ â€¢ Verify     â”‚  â”‚ â€¢ Handler   â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Phone      â”‚  â”‚ â€¢ Refresh    â”‚  â”‚ â€¢ Async     â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Sanitize   â”‚  â”‚              â”‚  â”‚   Wrapper   â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    MODELS LAYER                         â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚    â”‚
â”‚  â”‚  â”‚ User.ts (Mongoose Model)                   â”‚        â”‚    â”‚
â”‚  â”‚  â”‚                                             â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  Fields:                                    â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ firstName, lastName, email              â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ password (hashed)                       â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ role (student/company/admin)            â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ phoneNumber, profileImage               â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ isEmailVerified, isActive               â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ timestamps (createdAt, updatedAt)       â”‚        â”‚    â”‚
â”‚  â”‚  â”‚                                             â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  Methods:                                   â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ comparePassword()                       â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ getPublicProfile()                      â”‚        â”‚    â”‚
â”‚  â”‚  â”‚                                             â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  Hooks:                                     â”‚        â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ pre('save') - Hash password             â”‚        â”‚    â”‚
â”‚  â”‚  â”‚                                             â”‚        â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    MongoDB Connection
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATABASE LAYER                               â”‚
â”‚                     (MongoDB Atlas)                               â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Users Collection                      â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  Indexes:                                                â”‚    â”‚
â”‚  â”‚  â€¢ email (unique)                                        â”‚    â”‚
â”‚  â”‚  â€¢ role                                                  â”‚    â”‚
â”‚  â”‚  â€¢ createdAt                                             â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Request Flow Example: User Login

```
1. Frontend (Login Page)
   â†“
   User enters email & password
   â†“
   AuthService.login({ email, password })
   â†“

2. HTTP Request
   â†“
   POST /api/auth/login
   Headers: { Content-Type: application/json }
   Body: { email, password }
   â†“

3. Backend Server
   â†“
   Express receives request
   â†“
   Middleware: Helmet, CORS, JSON Parser
   â†“
   Router: /api/auth/login â†’ authController.login
   â†“

4. Controller (authController.login)
   â†“
   Validate input (email format, required fields)
   â†“
   Sanitize input
   â†“
   Query database: User.findOne({ email })
   â†“

5. Database
   â†“
   MongoDB finds user document
   â†“
   Returns user with password field
   â†“

6. Controller (continued)
   â†“
   Check if user exists
   â†“
   Check if user is active
   â†“
   Compare password: bcrypt.compare(password, hashedPassword)
   â†“
   Generate JWT tokens (access + refresh)
   â†“
   Return response
   â†“

7. HTTP Response
   â†“
   Status: 200 OK
   Body: {
     success: true,
     message: "Login successful",
     data: {
       user: { ...publicProfile },
       accessToken: "eyJhbGc...",
       refreshToken: "eyJhbGc..."
     }
   }
   â†“

8. Frontend
   â†“
   AuthService receives response
   â†“
   Store tokens in localStorage
   â†“
   Store user data in localStorage
   â†“
   Redirect to dashboard
```

## Security Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SECURITY LAYERS                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. INPUT VALIDATION
   â”œâ”€ Email format validation
   â”œâ”€ Password strength validation
   â”œâ”€ Input sanitization (remove <, >)
   â””â”€ Type checking (TypeScript)

2. AUTHENTICATION
   â”œâ”€ Password hashing (bcrypt, 12 rounds)
   â”œâ”€ JWT token generation
   â”œâ”€ Token expiration (7 days access, 30 days refresh)
   â””â”€ Token verification

3. AUTHORIZATION
   â”œâ”€ JWT middleware
   â”œâ”€ Role-based access control
   â”œâ”€ User status check (isActive)
   â””â”€ Protected routes

4. HTTP SECURITY
   â”œâ”€ Helmet.js (security headers)
   â”œâ”€ CORS configuration
   â”œâ”€ HTTPS ready
   â””â”€ Rate limiting ready

5. ERROR HANDLING
   â”œâ”€ No sensitive data in errors
   â”œâ”€ Generic error messages
   â”œâ”€ Development vs Production modes
   â””â”€ Proper HTTP status codes
```

## Data Flow: Password Hashing

```
User Registration:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Password: "SecurePass123!"
    â†“
bcrypt.genSalt(12)
    â†“
Salt: "$2a$12$randomsaltstring"
    â†“
bcrypt.hash(password, salt)
    â†“
Hashed: "$2a$12$randomsaltstring$hashedpasswordstring"
    â†“
Stored in MongoDB


User Login:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Input Password: "SecurePass123!"
    â†“
Retrieve hashed password from DB
    â†“
bcrypt.compare(inputPassword, hashedPassword)
    â†“
Returns: true/false
```

## JWT Token Structure

```
Header:
{
  "alg": "HS256",
  "typ": "JWT"
}

Payload:
{
  "userId": "507f1f77bcf86cd799439011",
  "email": "user@example.com",
  "role": "student",
  "iat": 1700000000,
  "exp": 1700604800
}

Signature:
HMACSHA256(
  base64UrlEncode(header) + "." +
  base64UrlEncode(payload),
  JWT_SECRET
)

Final Token:
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1MDdmMWY3N2JjZjg2Y2Q3OTk0MzkwMTEiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJyb2xlIjoic3R1ZGVudCIsImlhdCI6MTcwMDAwMDAwMCwiZXhwIjoxNzAwNjA0ODAwfQ.signature
```

---

**This architecture ensures:**
- âœ… Scalability
- âœ… Maintainability
- âœ… Security
- âœ… Clean separation of concerns
- âœ… Easy testing
- âœ… Professional code structure
